<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='%2334d399'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M12 18.75a6 6 0 006-6v-1.5a6 6 0 00-6-6v1.5a6 6 0 00-6 6v1.5a6 6 0 006 6z' /%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M12 12.75a3 3 0 003-3v-1.5a3 3 0 00-3-3v1.5a3 3 0 00-3 3v1.5a3 3 0 003 3z' /%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M8.25 6.75h7.5M8.25 17.25h7.5' /%3E%3C/svg%3E" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>إذاعات إسلامية</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Custom scrollbar for a more modern look */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #1f2937; /* bg-gray-800 */
      }
      ::-webkit-scrollbar-thumb {
        background: #4b5563; /* bg-gray-600 */
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #6b7280; /* bg-gray-500 */
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "react/": "https://aistudiocdn.com/react@^19.1.1/"
  }
}
</script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
  <body>
    <div id="root"></div>
    <script type="text/babel" data-type="module">
      import React, { useState, useRef, useCallback, useEffect } from 'react';
      import ReactDOM from 'react-dom/client';

      // --- All application code is inlined here to prevent file loading errors ---

      // components/icons/PlayIcon.tsx
      const PlayIcon = (props) => (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" {...props}>
          <path fillRule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.647c1.295.742 1.295 2.545 0 3.286L7.279 20.99c-1.25.717-2.779-.217-2.779-1.643V5.653z" clipRule="evenodd" />
        </svg>
      );

      // components/icons/PauseIcon.tsx
      const PauseIcon = (props) => (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" {...props}>
          <path fillRule="evenodd" d="M6.75 5.25a.75.75 0 00-.75.75v12a.75.75 0 00.75.75h3a.75.75 0 00.75-.75v-12a.75.75 0 00-.75-.75h-3zm7.5 0a.75.75 0 00-.75.75v12a.75.75 0 00.75.75h3a.75.75 0 00.75-.75v-12a.75.75 0 00-.75-.75h-3z" clipRule="evenodd" />
        </svg>
      );

      // components/icons/VolumeUpIcon.tsx
      const VolumeUpIcon = (props) => (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
          <path strokeLinecap="round" strokeLinejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
        </svg>
      );

      // components/icons/VolumeOffIcon.tsx
      const VolumeOffIcon = (props) => (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
          <path strokeLinecap="round" strokeLinejoin="round" d="M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
        </svg>
      );
      
      // components/icons/RadioIcon.tsx
      const RadioIcon = (props) => (
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
              <path strokeLinecap="round" strokeLinejoin="round" d="M12 18.75a6 6 0 006-6v-1.5a6 6 0 00-6-6v1.5a6 6 0 00-6 6v1.5a6 6 0 006 6z" />
              <path strokeLinecap="round" strokeLinejoin="round" d="M12 12.75a3 3 0 003-3v-1.5a3 3 0 00-3-3v1.5a3 3 0 00-3 3v1.5a3 3 0 003 3z" />
              <path strokeLinecap="round" strokeLinejoin="round" d="M8.25 6.75h7.5M8.25 17.25h7.5" />
          </svg>
      );

      // components/icons/VolumeWaveIcon.tsx
      const VolumeWaveIcon = (props) => (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
          <path strokeLinecap="round" strokeLinejoin="round" d="M8.25 6.75h7.5m-7.5 3.75h7.5m-7.5 3.75h7.5m-7.5 3.75h7.5m-15-9a1.5 1.5 0 011.5-1.5h1.5a1.5 1.5 0 011.5 1.5v3.75a1.5 1.5 0 01-1.5 1.5h-1.5a1.5 1.5 0 01-1.5-1.5V12zM15 9a1.5 1.5 0 011.5-1.5h1.5a1.5 1.5 0 011.5 1.5v3.75a1.5 1.5 0 01-1.5 1.5h-1.5a1.5 1.5 0 01-1.5-1.5V9z" />
        </svg>
      );
      
      // components/icons/LoadingSpinner.tsx
      const LoadingSpinner = (props) => (
          <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              className={`animate-spin ${props.className || ''}`}
              {...props}
          >
              <circle
                  className="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  strokeWidth="4"
              ></circle>
              <path
                  className="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
          </svg>
      );

      // constants.ts
      const STATIONS = [
        { id: 1, name: "إذاعة القرآن الكريم - السعودية", streamUrl: "https://Qurango.net/radio/tarateel" },
        { id: 2, name: "إذاعة القرآن الكريم - القاهرة", streamUrl: "https://backup.qurango.net/radio/quran_radio_cairo" },
        { id: 3, name: "إذاعة السنة النبوية", streamUrl: "https://Qurango.net/radio/sunnah" },
        { id: 4, name: "إذاعة متنوعة", streamUrl: "https://Qurango.net/radio/mix" },
        { id: 5, name: "الشيخ مشاري العفاسي", streamUrl: "https://Qurango.net/radio/mishary_alafasi" },
        { id: 6, name: "الشيخ سعود الشريم", streamUrl: "https://Qurango.net/radio/saoud_shuraim" },
        { id: 7, name: "الشيخ عبدالباسط عبدالصمد", streamUrl: "https://backup.qurango.net/radio/abdulbasit_abdulsamad_warsh" },
        { id: 8, name: "الشيخ ماهر المعيقلي", streamUrl: "https://Qurango.net/radio/maher_al_muaiqly" },
        { id: 9, name: "الشيخ عبدالرحمن السديس", streamUrl: "https://Qurango.net/radio/abdulrahman_alsudaes" },
        { id: 10, name: "إذاعة mp3quran", streamUrl: "https://live.mp3quran.net/islamradio" },
        { id: 11, name: "الشيخ ناصر القطامي", streamUrl: "https://Qurango.net/radio/nasser_alqatami" },
        { id: 12, name: "إذاعة الرقية الشرعية", streamUrl: "https://Qurango.net/radio/roqiah" },
      ];
      
      // components/Header.tsx
      const Header = () => {
        return (
          <header className="bg-slate-800/50 backdrop-blur-sm sticky top-0 z-10 p-4 shadow-lg">
            <div className="container mx-auto flex items-center justify-center gap-4">
              <RadioIcon className="w-8 h-8 text-emerald-400" />
              <h1 className="text-2xl md:text-3xl font-bold text-emerald-400 tracking-wide">
                إذاعات إسلامية
              </h1>
            </div>
          </header>
        );
      };

      // components/StationCard.tsx
      const StationCard = ({ station, isPlaying, isCurrent, onClick }) => {
        const cardClasses = `
          bg-slate-800 rounded-lg shadow-lg p-6 flex flex-col justify-center items-center text-center
          cursor-pointer transition-all duration-300 ease-in-out transform hover:scale-105
          focus:outline-none focus:ring-4 focus:ring-emerald-500/50
          ${isCurrent ? 'border-2 border-emerald-500' : 'border-2 border-transparent'}
          ${isPlaying ? 'ring-4 ring-emerald-500/50' : ''}
        `;

        return (
          <div className={cardClasses} onClick={onClick} onKeyPress={onClick} role="button" tabIndex={0}>
              <div className="relative mb-4">
                  {isCurrent ? (
                      isPlaying ? (
                          <VolumeWaveIcon className="w-16 h-16 text-emerald-400" />
                      ) : (
                          <PauseIcon className="w-16 h-16 text-gray-400" />
                      )
                  ) : (
                      <PlayIcon className="w-16 h-16 text-gray-400 group-hover:text-emerald-400 transition-colors" />
                  )}
              </div>
            <h3 className="font-semibold text-lg text-slate-100">{station.name}</h3>
            {isCurrent && (
              <span className={`mt-2 text-sm font-bold ${isPlaying ? 'text-emerald-400 animate-pulse' : 'text-slate-400'}`}>
                {isPlaying ? 'جاري التشغيل' : 'متوقف مؤقتاً'}
              </span>
            )}
          </div>
        );
      };

      // components/StationList.tsx
      const StationList = ({ stations, currentStationId, isPlaying, onStationSelect }) => {
        return (
          <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
            {stations.map(station => (
              <StationCard
                key={station.id}
                station={station}
                isPlaying={currentStationId === station.id && isPlaying}
                isCurrent={currentStationId === station.id}
                onClick={() => onStationSelect(station)}
              />
            ))}
          </div>
        );
      };

      // components/RadioPlayer.tsx
      const RadioPlayer = ({ station, isPlaying, isLoading, volume, onPlayPause, onVolumeChange }) => {
        return (
          <footer className="fixed bottom-0 left-0 right-0 bg-slate-800/80 backdrop-blur-lg border-t border-slate-700 z-20">
            <div className="container mx-auto px-4 py-3 flex items-center justify-between gap-4">
              <div className="flex-1 min-w-0">
                <p className="font-bold text-emerald-400 truncate">{station.name}</p>
                <p className="text-xs text-slate-400">{isLoading ? 'جاري التحميل...' : (isPlaying ? 'يعمل الآن' : 'متوقف')}</p>
              </div>
              
              <div className="flex items-center gap-4">
                <button
                  onClick={onPlayPause}
                  aria-label={isPlaying ? "Pause" : "Play"}
                  className="bg-emerald-500 text-white rounded-full p-3 hover:bg-emerald-600 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2 focus:ring-offset-slate-800 disabled:bg-slate-600"
                  disabled={isLoading}
                >
                  {isLoading ? <LoadingSpinner className="w-6 h-6"/> : (isPlaying ? <PauseIcon className="w-6 h-6" /> : <PlayIcon className="w-6 h-6" />)}
                </button>
              </div>

              <div className="hidden sm:flex items-center gap-2 w-32">
                {volume > 0 ? <VolumeUpIcon className="w-6 h-6 text-slate-400" /> : <VolumeOffIcon className="w-6 h-6 text-slate-400" />}
                <input
                  type="range"
                  min="0"
                  max="1"
                  step="0.01"
                  value={volume}
                  onChange={(e) => onVolumeChange(parseFloat(e.target.value))}
                  className="w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-emerald-500"
                  aria-label="Volume control"
                />
              </div>
            </div>
          </footer>
        );
      };
      
      // App.tsx
      const App = () => {
        const [currentStation, setCurrentStation] = useState(null);
        const [isPlaying, setIsPlaying] = useState(false);
        const [isLoading, setIsLoading] = useState(false);
        const [volume, setVolume] = useState(0.8);
        const audioRef = useRef(null);

        const playStation = useCallback((station) => {
          if (audioRef.current) {
            setCurrentStation(station);
            setIsPlaying(true);
            setIsLoading(true);
            audioRef.current.src = station.streamUrl;
            audioRef.current.load();
            audioRef.current.play().catch(error => {
              console.error("Error playing audio:", error);
              setIsPlaying(false);
              setIsLoading(false);
            });
          }
        }, []);
        
        const handleStationSelect = useCallback((station) => {
          if (currentStation?.id === station.id) {
            setIsPlaying(prev => !prev);
          } else {
            playStation(station);
          }
        }, [currentStation, playStation]);

        const handlePlayPause = useCallback(() => {
          if (currentStation) {
            setIsPlaying(prev => !prev);
          }
        }, [currentStation]);

        const handleVolumeChange = useCallback((newVolume) => {
          setVolume(newVolume);
          if (audioRef.current) {
            audioRef.current.volume = newVolume;
          }
        }, []);

        useEffect(() => {
          const audio = audioRef.current;
          if (!audio) return;

          if (isPlaying) {
            audio.play().catch(error => {
              console.error("Error playing audio:", error);
              setIsPlaying(false);
              setIsLoading(false);
            });
          } else {
            audio.pause();
          }
        }, [isPlaying]);

        useEffect(() => {
          const audio = audioRef.current;
          if (!audio) return;

          const onPlaying = () => setIsLoading(false);
          const onWaiting = () => setIsLoading(true);
          const onStalled = () => setIsLoading(true);
          const onError = () => {
            setIsLoading(false);
            setIsPlaying(false);
          }

          audio.addEventListener('playing', onPlaying);
          audio.addEventListener('waiting', onWaiting);
          audio.addEventListener('stalled', onStalled);
          audio.addEventListener('error', onError);

          return () => {
            audio.removeEventListener('playing', onPlaying);
            audio.removeEventListener('waiting', onWaiting);
            audio.removeEventListener('stalled', onStalled);
            audio.removeEventListener('error', onError);
          };
        }, []);

        return (
          <div className="bg-slate-900 text-white min-h-screen flex flex-col font-sans">
            <Header />
            <main className="flex-grow p-4 md:p-8 pb-32">
              <StationList
                stations={STATIONS}
                currentStationId={currentStation?.id ?? null}
                isPlaying={isPlaying}
                onStationSelect={handleStationSelect}
              />
            </main>
            {currentStation && (
              <RadioPlayer
                station={currentStation}
                isPlaying={isPlaying}
                isLoading={isLoading}
                volume={volume}
                onPlayPause={handlePlayPause}
                onVolumeChange={handleVolumeChange}
              />
            )}
            <audio ref={audioRef} preload="none" crossOrigin="anonymous" className="hidden"></audio>
          </div>
        );
      };

      const rootElement = document.getElementById('root');
      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
  </body>
</html>